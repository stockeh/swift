# @package _global_
defaults:
  - /data: era5-eagle-5.6
  - /model: edm2
  - /loss: trigflow
  - /precond: pass
  - /solver: 2s
  - override /loss/noise: loguniform
  - override /optimizer: adam

optimizer:
  lr: 0.01

model:
  model_channels: 256
  attn_resolutions: [[8, 16], [4, 8]]
  channel_mult: [1, 2, 3, 4]
  dropout: 0.1

data:
  batch_size: 512
  data_workers: 4
  val_local_batch_size: 16
    
trainer:
  total_kimg: 200000 # 200 mimg
  ema_halflife_kimg: 500
  lr_rampup_kimg: 2000 # 2 mimg
  lr_min_factor: 1e-5
  lr_cosine_anneal: false
  kimg_per_tick: 5
  checkpoint_ticks: 500
  val_ticks: 100
  val_target_interval: 8

experiment_name: era5-unet-5.6-trigflow